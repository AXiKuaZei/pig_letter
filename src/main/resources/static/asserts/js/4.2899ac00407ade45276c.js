webpackJsonp([4],{OcFh:function(e,t){},cx22:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("N1zf"),n=i("MaNE"),r={name:"console",components:{topmenu:a.a,consoleMenu:n.default},data:function(){var e=this;return{columns:[{type:"selection",width:60,align:"center"},{type:"index2",width:60,align:"center",render:function(t,i){return t("span",i.index+(e.pageNum-1)*e.pageSize+1)}},{title:"标题",key:"title"},{title:"最近一次修改",key:"lastUpdatedTime"},{title:"发表时间",key:"publishedTime"},{title:"操作",fixed:"right",width:200,render:function(t,i){var a=i.row.articleId;return t("div",[t("Button",{props:{type:"primary",size:"mid"},on:{click:function(){e.editArticle(a)}}},"编辑"),t("Button",{props:{type:"error",size:"mid"},style:"margin-left: 10px",on:{click:function(){e.deleteArticle(a)}}},"删除")])}}],total:1,pageNum:1,pageSize:10,articleList:[{articleId:10,title:"日记10",authorId:2,author:"肮脏的小翅膀02",publishedTime:"2020-10-18 18:36:48",lastUpdatedTime:"2020-10-18 18:36:48",deleted:0,content:"日记10的内容"},{articleId:8,title:"日记08",authorId:1,author:"肮脏的小翅膀01",publishedTime:"2020-10-18 18:36:48",lastUpdatedTime:"2020-10-18 18:36:48",deleted:0,content:"日记08的内容"}]}},methods:{getArticles:function(){var e=this,t=new URLSearchParams;t.append("pageNum",this.pageNum),t.append("pageSize",this.pageSize),this.$axios.post("/articlePage",t).then(function(t){e.articleList=t.data.data.list,e.total=t.data.data.total})},changePage:function(e){var t=this;this.pageNum=e,this.$nextTick(function(){t.getArticles()})},changePageSize:function(e){var t=this;this.pageSize=e,this.$nextTick(function(){t.getArticles()})},editArticle:function(e){this.$router.push("/admin/editor/"+e)},deleteArticle:function(e){var t=this,i=new URLSearchParams;i.append("articleId",e),this.$axios({url:"/article",method:"delete",data:i}).then(function(e){"success"===e.data.message?t.$Message.success("删除成功！"):t.$Message.error("删除文章异常，请重试！"),t.getArticles()})},deleteArticles:function(){var e=this,t=this.$refs.selection.getSelection().map(function(e){return e.articleId}),i=new URLSearchParams;i.append("articleIds",t),console.log(i),this.$axios({url:"/articleMulti",method:"delete",data:i}).then(function(t){"success"===t.data.message?e.$Message.success("删除成功！"):e.$Message.error("删除文章异常，请重试！"),e.getArticles()})},addArticle:function(){this.$router.push("/admin/editor/new")}},created:function(){this.getArticles()}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"layout"},[i("Layout",[i("topmenu"),e._v(" "),i("Layout",[i("Sider",[i("consoleMenu",{staticStyle:{height:"100%"}})],1),e._v(" "),i("Layout",{style:{padding:"0 24px 24px"}},[i("Breadcrumb",{style:{margin:"24px"}},[i("BreadcrumbItem",[e._v("内容管理")]),e._v(" "),i("BreadcrumbItem",[e._v("文章管理")])],1),e._v(" "),i("Content",{style:{padding:"24px",minHeight:"280px",background:"#fff"}},[i("Button",{attrs:{type:"info",size:"mid"},on:{click:e.addArticle}},[e._v("添加文章")]),e._v(" "),i("Button",{attrs:{type:"error",size:"mid"},on:{click:e.deleteArticles}},[e._v("批量删除")]),e._v(" "),i("Table",{ref:"selection",staticStyle:{"margin-top":"10px"},attrs:{stripe:"",columns:e.columns,data:e.articleList}}),e._v(" "),i("div",{staticStyle:{"margin-top":"24px"}},[i("Page",{attrs:{total:e.total,current:e.pageNum,"page-size":e.pageSize,"show-sizer":"","show-elevator":"",transfer:"true"},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var c=i("VU/8")(r,s,!1,function(e){i("OcFh")},"data-v-bf6b9296",null);t.default=c.exports}});
//# sourceMappingURL=4.2899ac00407ade45276c.js.map